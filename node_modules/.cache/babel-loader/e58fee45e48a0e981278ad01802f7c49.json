{"ast":null,"code":"var _this = this,\n  _jsxFileName = \"/home/jeff/bobawedding/src/weddingCommentServer/Comment.jsx\";\nimport React from 'react';\nimport jamaica from '../assets/jamaica.jpg';\n// import \"./api.js\"\nimport CommentForm from './CommentForm';\nvar Comment = function Comment(_ref) {\n  var comment = _ref.comment,\n    replies = _ref.replies,\n    currentUserId = _ref.currentUserId,\n    deleteComment = _ref.deleteComment,\n    updateComment = _ref.updateComment,\n    activeComment = _ref.activeComment,\n    addComment = _ref.addComment,\n    setActiveComment = _ref.setActiveComment,\n    _ref$parentId = _ref.parentId,\n    parentId = _ref$parentId === void 0 ? null : _ref$parentId;\n  var fiveMinutes = 300000;\n  var timePassed = new Date() - new Date(comment.createdAt) > fiveMinutes;\n  var canReply = Boolean(currentUserId);\n  var canEdit = currentUserId === comment.userId && !timePassed;\n  var canDelete = currentUserId === comment.userId && !timePassed;\n  var createdAt = new Date(comment.createdAt).toLocaleDateString();\n  var isReplying = activeComment && activeComment.type === 'replying' && activeComment.id === comment.id;\n  var isEditing = activeComment && activeComment.type === 'editing' && activeComment.id === comment.id;\n  var replyId = parentId ? parentId : comment.id;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"comment\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"comment-image-container\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: jamaica,\n    alt: \"issaImage\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"comment-right-part\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"comment-content\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"comment-author\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 17\n    }\n  }, comment.username), /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 17\n    }\n  }, createdAt), !isEditing && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"comment-text\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 32\n    }\n  }, comment.body), isEditing && /*#__PURE__*/React.createElement(CommentForm, {\n    submitLabel: \"Update\",\n    hasCancelButton: true,\n    initialText: comment.body,\n    handleSubmit: function handleSubmit(text) {\n      return updateComment(text, comment.id);\n    },\n    handleCancel: function handleCancel() {\n      return setActiveComment(null);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"comment-text\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 13\n    }\n  }, comment.body), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"comment-actions\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 13\n    }\n  }, canReply && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"comment-action\",\n    onClick: function onClick() {\n      return setActiveComment({\n        id: comment.id,\n        type: \"replying\"\n      });\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 28\n    }\n  }, \"Reply\"), canEdit && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"comment-action\",\n    onClick: function onClick() {\n      return setActiveComment({\n        id: comment.id,\n        type: \"editing\"\n      });\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 27\n    }\n  }, \"Edit\"), canDelete && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"comment-action\",\n    onClick: function onClick() {\n      return deleteComment(comment.id);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 29\n    }\n  }, \"Delete\")), isReplying && /*#__PURE__*/React.createElement(CommentForm, {\n    submitLabel: \"Reply\",\n    handleSubmit: function handleSubmit(text) {\n      return addComment(text, replyId);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 15\n    }\n  }), replies.length > 0 && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"replies\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 15\n    }\n  }, replies.map(function (reply) {\n    return /*#__PURE__*/React.createElement(Comment, {\n      comment: reply,\n      key: reply.id,\n      replies: [],\n      currentUserId: currentUserId,\n      deleteComment: deleteComment,\n      updateComment: updateComment,\n      addComment: addComment,\n      activeComment: activeComment,\n      setActiveComment: setActiveComment,\n      parentId: comment.id,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 19\n      }\n    });\n  }))));\n};\nexport default Comment;","map":{"version":3,"names":["React","jamaica","CommentForm","Comment","_ref","comment","replies","currentUserId","deleteComment","updateComment","activeComment","addComment","setActiveComment","_ref$parentId","parentId","fiveMinutes","timePassed","Date","createdAt","canReply","Boolean","canEdit","userId","canDelete","toLocaleDateString","isReplying","type","id","isEditing","replyId","createElement","className","__self","_this","__source","fileName","_jsxFileName","lineNumber","columnNumber","src","alt","username","body","submitLabel","hasCancelButton","initialText","handleSubmit","text","handleCancel","onClick","length","map","reply","key"],"sources":["/home/jeff/bobawedding/src/weddingCommentServer/Comment.jsx"],"sourcesContent":["import React from 'react'\nimport jamaica from '../assets/jamaica.jpg'\n// import \"./api.js\"\nimport CommentForm from './CommentForm';\n\nconst Comment = ({ \n    comment, \n    replies, \n    currentUserId, \n    deleteComment, \n    updateComment,\n    activeComment,\n    addComment, \n    setActiveComment, \n    parentId = null, }) => {\n  const fiveMinutes = 300000;\n  const timePassed = new Date() - new Date(comment.createdAt) > fiveMinutes;\n  const canReply = Boolean(currentUserId)\n  const canEdit = currentUserId === comment.userId && !timePassed;\n  const canDelete = currentUserId === comment.userId && !timePassed;\n  const createdAt = new Date(comment.createdAt).toLocaleDateString();\n  const isReplying = \n    activeComment && \n    activeComment.type === 'replying' && \n    activeComment.id === comment.id;\n  const isEditing = \n    activeComment &&\n    activeComment.type === 'editing' &&\n    activeComment.id === comment.id;\n  const replyId = parentId ? parentId : comment.id;\n  return (\n    <div className=\"comment\">\n        <div className=\"comment-image-container\">\n            <img src={jamaica} alt='issaImage'/>\n        </div>\n        <div className=\"comment-right-part\">\n            <div className=\"comment-content\">\n                <div className=\"comment-author\">{comment.username}</div>\n                <div>{createdAt}</div>\n                {!isEditing && <div className='comment-text'>{comment.body}</div>}\n                {isEditing && (\n                  <CommentForm submitLabel=\"Update\" hasCancelButton initialText={comment.body}\n                  handleSubmit={(text) => updateComment(text, comment.id)} handleCancel={() => setActiveComment(null)}\n                  />\n                )}\n            </div>\n            <div className=\"comment-text\">{comment.body}</div>\n            <div className=\"comment-actions\">\n              {canReply && <div className=\"comment-action\" onClick={() => setActiveComment({ id: comment.id, type: \"replying\"})}>Reply</div>}\n              {canEdit && <div className=\"comment-action\" onClick={() => setActiveComment({ id: comment.id, type: \"editing\"})}>Edit</div>}\n              {canDelete && <div className=\"comment-action\" onClick={() => deleteComment(comment.id)}>Delete</div>}\n            </div>\n            {isReplying && (\n              <CommentForm \n                submitLabel=\"Reply\" \n                handleSubmit={(text) => addComment(text, replyId)}\n                />\n            )}\n            {replies.length > 0 && (\n              <div className=\"replies\">\n                {replies.map(reply => (\n                  <Comment \n                    comment={reply} \n                    key={reply.id} \n                    replies={[]} \n                    currentUserId={currentUserId}\n                    deleteComment={deleteComment}\n                    updateComment={updateComment}\n                    addComment={addComment}\n                    activeComment={activeComment}\n                    setActiveComment={setActiveComment}\n                    parentId={comment.id}\n                     /> \n                ))}\n              </div>\n            )}\n        </div>\n    </div>\n  )\n}\n\nexport default Comment"],"mappings":"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"},"metadata":{},"sourceType":"module"}