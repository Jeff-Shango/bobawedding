{"ast":null,"code":"import _objectSpread from \"/home/jeff/bobawedding/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _toConsumableArray from \"/home/jeff/bobawedding/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"/home/jeff/bobawedding/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _this = this,\n  _jsxFileName = \"/home/jeff/bobawedding/src/weddingCommentServer/Comments.jsx\";\nimport React, { useEffect, useState } from 'react';\nimport { getComments as getCommentsApi, createComment as createCommentApi, deleteComment as deleteCommentApi, updateComment as updateCommentApi } from './api';\nimport WedComment from './Comment.jsx';\nimport CommentForm from './CommentForm.jsx';\n\n// import CommentForm from './CommentForm';\nvar WedComments = function WedComments(_ref) {\n  var currentUserId = _ref.currentUserId;\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    backendComments = _useState2[0],\n    setBackendComments = _useState2[1];\n  var _useState3 = useState(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    activeComment = _useState4[0],\n    setActiveComment = _useState4[1];\n  var rootComments = backendComments.filter(function (backendComment) {\n    return backendComment.parentId === null;\n  });\n  var getReplies = function getReplies(commendId) {\n    return backendComments.filter(function (backendComment) {\n      return backendComment.parentId === commendId;\n    }).sort(function (a, b) {\n      return new Date(a.createdAt).getTime() - new Date(b.createdAt).getTime();\n    });\n  };\n  var addComment = function addComment(text, parentId) {\n    console.log(\"addComment\", text, parentId);\n    createCommentApi(text, parentId).then(function (comment) {\n      setBackendComments([comment].concat(_toConsumableArray(backendComments)));\n      setActiveComment(null);\n    });\n  };\n  var deleteComment = function deleteComment(commentId) {\n    if (window.confirm('Sure about deleting this?')) {\n      deleteCommentApi(commentId).then(function () {\n        var updatedBackendComments = backendComments.filter(function (backendComment) {\n          return backendComment.id !== commentId;\n        });\n        setBackendComments(updatedBackendComments);\n      });\n    }\n  };\n  var updateComment = function updateComment(text, commentId) {\n    updateCommentApi(text, commentId).then(function () {\n      var updatedBackendComments = backendComments.map(function (backendComment) {\n        if (backendComment.id === commentId) {\n          return _objectSpread({}, backendComment, {\n            body: text\n          });\n        }\n        return backendComment;\n      });\n      setBackendComments(updatedBackendComments);\n      setActiveComment(null);\n    });\n  };\n  useEffect(function () {\n    getCommentsApi().then(function (data) {\n      setBackendComments(data);\n    });\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"comments\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    className: \"comments-title\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 9\n    }\n  }, \"Comments\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"comment-form-title\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }\n  }, \"Write Comment\"), /*#__PURE__*/React.createElement(CommentForm, {\n    submitLabel: \"Write\",\n    handleSubmit: addComment,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"comments-container\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }\n  }, rootComments.map(function (rootComment) {\n    return /*#__PURE__*/React.createElement(WedComment, {\n      key: rootComment.id,\n      comment: rootComment,\n      replies: getReplies(rootComment.id),\n      currentUserId: currentUserId,\n      deleteComment: deleteComment,\n      updateComment: updateComment,\n      activeComment: activeComment,\n      setActiveComment: setActiveComment,\n      addComment: addComment,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 17\n      }\n    });\n  })));\n};\nexport default WedComments;","map":{"version":3,"names":["React","useEffect","useState","getComments","getCommentsApi","createComment","createCommentApi","deleteComment","deleteCommentApi","updateComment","updateCommentApi","WedComment","CommentForm","WedComments","_ref","currentUserId","_useState","_useState2","_slicedToArray","backendComments","setBackendComments","_useState3","_useState4","activeComment","setActiveComment","rootComments","filter","backendComment","parentId","getReplies","commendId","sort","a","b","Date","createdAt","getTime","addComment","text","console","log","then","comment","concat","_toConsumableArray","commentId","window","confirm","updatedBackendComments","id","map","_objectSpread","body","data","createElement","className","__self","_this","__source","fileName","_jsxFileName","lineNumber","columnNumber","submitLabel","handleSubmit","rootComment","key","replies"],"sources":["/home/jeff/bobawedding/src/weddingCommentServer/Comments.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { \n    getComments as getCommentsApi, \n    createComment as createCommentApi,\n    deleteComment as deleteCommentApi,\n    updateComment as updateCommentApi } from './api'\nimport WedComment from './Comment.jsx';\nimport CommentForm from './CommentForm.jsx';\n\n// import CommentForm from './CommentForm';\nconst WedComments = ({ currentUserId }) => {\n    const [backendComments, setBackendComments] = useState([]);\n    const [activeComment, setActiveComment] = useState(null)\n    const rootComments = backendComments.filter(\n        (backendComment) => backendComment.parentId === null\n    );\n    const getReplies = commendId => {\n        return backendComments\n        .filter((backendComment) => backendComment.parentId === commendId)\n        .sort(\n            (a, b) => \n                new Date(a.createdAt).getTime() - new Date(b.createdAt).getTime()\n        );\n    };\n    const addComment = (text, parentId) => {\n        console.log(\"addComment\", text, parentId);\n        createCommentApi(text, parentId)\n        .then((comment) => {\n            setBackendComments([comment, ...backendComments])\n            setActiveComment(null)\n        })\n    };\n    \n    const deleteComment = (commentId) => {\nif (window.confirm('Sure about deleting this?')) {\n    deleteCommentApi(commentId).then(() => {\n        const updatedBackendComments = backendComments.filter((backendComment) => backendComment.id !== commentId);\n        setBackendComments(updatedBackendComments);\n    })\n}\n    }\n\n    const updateComment = (text, commentId) => {\n        updateCommentApi(text, commentId).then(() => {\n            const updatedBackendComments = backendComments.map(backendComment => {\n                if (backendComment.id === commentId) {\n                    return { ...backendComment, body: text };\n                }\n                return backendComment;\n            });\n            setBackendComments(updatedBackendComments);\n            setActiveComment(null)\n        });\n    };\n\n    useEffect(() => {\n    getCommentsApi().then((data) => {\n        setBackendComments(data);\n    });\n    }, []);\n  return (\n    <div className='comments'>\n        <h3 className=\"comments-title\">Comments</h3>\n        <div className=\"comment-form-title\">Write Comment</div>\n        <CommentForm submitLabel=\"Write\" handleSubmit={addComment}/>\n        <div className=\"comments-container\">\n            {rootComments.map(rootComment => (\n                <WedComment \n                key={rootComment.id} \n                comment={rootComment} \n                replies={getReplies(rootComment.id)} \n                currentUserId={currentUserId}\n                deleteComment={deleteComment}\n                updateComment={updateComment}\n                activeComment={activeComment}\n                setActiveComment={setActiveComment}\n                addComment={addComment}\n                />\n                \n            ))}\n        </div>\n    </div>\n  )\n}\n\nexport default WedComments"],"mappings":"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"},"metadata":{},"sourceType":"module"}