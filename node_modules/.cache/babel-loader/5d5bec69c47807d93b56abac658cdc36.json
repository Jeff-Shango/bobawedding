{"ast":null,"code":"import _objectSpread from \"/home/jeff/bobawedding/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _toConsumableArray from \"/home/jeff/bobawedding/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"/home/jeff/bobawedding/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _this = this,\n  _jsxFileName = \"/home/jeff/bobawedding/src/weddingCommentServer/Comments.jsx\";\nimport React, { useEffect, useState } from 'react';\n// import { \n//     getComments as getCommentsApi, \n//     createComment as createCommentApi,\n//     deleteComment as deleteCommentApi,\n//     updateComment as updateCommentApi } from './api'\nimport WedComment from './Comment.jsx';\nimport CommentForm from './CommentForm.jsx';\n\n// import CommentForm from './CommentForm';\nvar WedComments = function WedComments(_ref) {\n  var currentUserId = _ref.currentUserId;\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    backendComments = _useState2[0],\n    setBackendComments = _useState2[1];\n  var _useState3 = useState(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    activeComment = _useState4[0],\n    setActiveComment = _useState4[1];\n  var rootComments = backendComments.filter(function (backendComment) {\n    return backendComment.parentId === null;\n  });\n  var getReplies = function getReplies(commendId) {\n    return backendComments.filter(function (backendComment) {\n      return backendComment.parentId === commendId;\n    }).sort(function (a, b) {\n      return new Date(a.createdAt).getTime() - new Date(b.createdAt).getTime();\n    });\n  };\n  var addComment = function addComment(text, parentId) {\n    console.log(\"addComment\", text, parentId);\n    createCommentApi(text, parentId).then(function (comment) {\n      setBackendComments([comment].concat(_toConsumableArray(backendComments)));\n      setActiveComment(null);\n    });\n  };\n  var deleteComment = function deleteComment(commentId) {\n    if (window.confirm('Sure about deleting this?')) {\n      deleteCommentApi(commentId).then(function () {\n        var updatedBackendComments = backendComments.filter(function (backendComment) {\n          return backendComment.id !== commentId;\n        });\n        setBackendComments(updatedBackendComments);\n      });\n    }\n  };\n  var updateComment = function updateComment(text, commentId) {\n    updateCommentApi(text, commentId).then(function () {\n      var updatedBackendComments = backendComments.map(function (backendComment) {\n        if (backendComment.id === commentId) {\n          return _objectSpread({}, backendComment, {\n            body: text\n          });\n        }\n        return backendComment;\n      });\n      setBackendComments(updatedBackendComments);\n      setActiveComment(null);\n    });\n  };\n  useEffect(function () {\n    getCommentsApi().then(function (data) {\n      setBackendComments(data);\n    });\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"comments\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    className: \"comments-title\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 9\n    }\n  }, \"Comments\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"comment-form-title\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 9\n    }\n  }, \"Write Comment\"), /*#__PURE__*/React.createElement(CommentForm, {\n    submitLabel: \"Write\",\n    handleSubmit: addComment,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"comments-container\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }\n  }, rootComments.map(function (rootComment) {\n    return /*#__PURE__*/React.createElement(WedComment, {\n      key: rootComment.id,\n      comment: rootComment,\n      replies: getReplies(rootComment.id),\n      currentUserId: currentUserId,\n      deleteComment: deleteComment,\n      updateComment: updateComment,\n      activeComment: activeComment,\n      setActiveComment: setActiveComment,\n      addComment: addComment,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 17\n      }\n    });\n  })));\n};\nexport default WedComments;","map":{"version":3,"names":["React","useEffect","useState","WedComment","CommentForm","WedComments","_ref","currentUserId","_useState","_useState2","_slicedToArray","backendComments","setBackendComments","_useState3","_useState4","activeComment","setActiveComment","rootComments","filter","backendComment","parentId","getReplies","commendId","sort","a","b","Date","createdAt","getTime","addComment","text","console","log","createCommentApi","then","comment","concat","_toConsumableArray","deleteComment","commentId","window","confirm","deleteCommentApi","updatedBackendComments","id","updateComment","updateCommentApi","map","_objectSpread","body","getCommentsApi","data","createElement","className","__self","_this","__source","fileName","_jsxFileName","lineNumber","columnNumber","submitLabel","handleSubmit","rootComment","key","replies"],"sources":["/home/jeff/bobawedding/src/weddingCommentServer/Comments.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react'\n// import { \n//     getComments as getCommentsApi, \n//     createComment as createCommentApi,\n//     deleteComment as deleteCommentApi,\n//     updateComment as updateCommentApi } from './api'\nimport WedComment from './Comment.jsx';\nimport CommentForm from './CommentForm.jsx';\n\n// import CommentForm from './CommentForm';\nconst WedComments = ({ currentUserId }) => {\n    const [backendComments, setBackendComments] = useState([]);\n    const [activeComment, setActiveComment] = useState(null)\n    const rootComments = backendComments.filter(\n        (backendComment) => backendComment.parentId === null\n    );\n    const getReplies = commendId => {\n        return backendComments\n        .filter((backendComment) => backendComment.parentId === commendId)\n        .sort(\n            (a, b) => \n                new Date(a.createdAt).getTime() - new Date(b.createdAt).getTime()\n        );\n    };\n    const addComment = (text, parentId) => {\n        console.log(\"addComment\", text, parentId);\n        createCommentApi(text, parentId).then(comment => {\n            setBackendComments([comment, ...backendComments])\n            setActiveComment(null)\n        })\n    };\n    \n    const deleteComment = (commentId) => {\nif (window.confirm('Sure about deleting this?')) {\n    deleteCommentApi(commentId).then(() => {\n        const updatedBackendComments = backendComments.filter((backendComment) => backendComment.id !== commentId);\n        setBackendComments(updatedBackendComments);\n    })\n}\n    }\n\n    const updateComment = (text, commentId) => {\n        updateCommentApi(text, commentId).then(() => {\n            const updatedBackendComments = backendComments.map(backendComment => {\n                if (backendComment.id === commentId) {\n                    return { ...backendComment, body: text };\n                }\n                return backendComment;\n            });\n            setBackendComments(updatedBackendComments);\n            setActiveComment(null)\n        });\n    };\n\n    useEffect(() => {\n    getCommentsApi().then((data) => {\n        setBackendComments(data);\n    });\n    }, []);\n  return (\n    <div className='comments'>\n        <h3 className=\"comments-title\">Comments</h3>\n        <div className=\"comment-form-title\">Write Comment</div>\n        <CommentForm submitLabel=\"Write\" handleSubmit={addComment}/>\n        <div className=\"comments-container\">\n            {rootComments.map(rootComment => (\n                <WedComment \n                key={rootComment.id} \n                comment={rootComment} \n                replies={getReplies(rootComment.id)} \n                currentUserId={currentUserId}\n                deleteComment={deleteComment}\n                updateComment={updateComment}\n                activeComment={activeComment}\n                setActiveComment={setActiveComment}\n                addComment={addComment}\n                />\n                \n            ))}\n        </div>\n    </div>\n  )\n}\n\nexport default WedComments"],"mappings":";;;;;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD;AACA;AACA;AACA;AACA;AACA,OAAOC,UAAU,MAAM,eAAe;AACtC,OAAOC,WAAW,MAAM,mBAAmB;;AAE3C;AACA,IAAMC,WAAW,GAAG,SAAdA,WAAWA,CAAAC,IAAA,EAA0B;EAAA,IAApBC,aAAa,GAAAD,IAAA,CAAbC,aAAa;EAAA,IAAAC,SAAA,GACcN,QAAQ,CAAC,EAAE,CAAC;IAAAO,UAAA,GAAAC,cAAA,CAAAF,SAAA;IAAnDG,eAAe,GAAAF,UAAA;IAAEG,kBAAkB,GAAAH,UAAA;EAAA,IAAAI,UAAA,GACAX,QAAQ,CAAC,IAAI,CAAC;IAAAY,UAAA,GAAAJ,cAAA,CAAAG,UAAA;IAAjDE,aAAa,GAAAD,UAAA;IAAEE,gBAAgB,GAAAF,UAAA;EACtC,IAAMG,YAAY,GAAGN,eAAe,CAACO,MAAM,CACvC,UAACC,cAAc;IAAA,OAAKA,cAAc,CAACC,QAAQ,KAAK,IAAI;EAAA,CACxD,CAAC;EACD,IAAMC,UAAU,GAAG,SAAbA,UAAUA,CAAGC,SAAS,EAAI;IAC5B,OAAOX,eAAe,CACrBO,MAAM,CAAC,UAACC,cAAc;MAAA,OAAKA,cAAc,CAACC,QAAQ,KAAKE,SAAS;IAAA,EAAC,CACjEC,IAAI,CACD,UAACC,CAAC,EAAEC,CAAC;MAAA,OACD,IAAIC,IAAI,CAACF,CAAC,CAACG,SAAS,CAAC,CAACC,OAAO,CAAC,CAAC,GAAG,IAAIF,IAAI,CAACD,CAAC,CAACE,SAAS,CAAC,CAACC,OAAO,CAAC,CAAC;IAAA,CACzE,CAAC;EACL,CAAC;EACD,IAAMC,UAAU,GAAG,SAAbA,UAAUA,CAAIC,IAAI,EAAEV,QAAQ,EAAK;IACnCW,OAAO,CAACC,GAAG,CAAC,YAAY,EAAEF,IAAI,EAAEV,QAAQ,CAAC;IACzCa,gBAAgB,CAACH,IAAI,EAAEV,QAAQ,CAAC,CAACc,IAAI,CAAC,UAAAC,OAAO,EAAI;MAC7CvB,kBAAkB,EAAEuB,OAAO,EAAAC,MAAA,CAAAC,kBAAA,CAAK1B,eAAe,EAAC,CAAC;MACjDK,gBAAgB,CAAC,IAAI,CAAC;IAC1B,CAAC,CAAC;EACN,CAAC;EAED,IAAMsB,aAAa,GAAG,SAAhBA,aAAaA,CAAIC,SAAS,EAAK;IACzC,IAAIC,MAAM,CAACC,OAAO,CAAC,2BAA2B,CAAC,EAAE;MAC7CC,gBAAgB,CAACH,SAAS,CAAC,CAACL,IAAI,CAAC,YAAM;QACnC,IAAMS,sBAAsB,GAAGhC,eAAe,CAACO,MAAM,CAAC,UAACC,cAAc;UAAA,OAAKA,cAAc,CAACyB,EAAE,KAAKL,SAAS;QAAA,EAAC;QAC1G3B,kBAAkB,CAAC+B,sBAAsB,CAAC;MAC9C,CAAC,CAAC;IACN;EACI,CAAC;EAED,IAAME,aAAa,GAAG,SAAhBA,aAAaA,CAAIf,IAAI,EAAES,SAAS,EAAK;IACvCO,gBAAgB,CAAChB,IAAI,EAAES,SAAS,CAAC,CAACL,IAAI,CAAC,YAAM;MACzC,IAAMS,sBAAsB,GAAGhC,eAAe,CAACoC,GAAG,CAAC,UAAA5B,cAAc,EAAI;QACjE,IAAIA,cAAc,CAACyB,EAAE,KAAKL,SAAS,EAAE;UACjC,OAAAS,aAAA,KAAY7B,cAAc;YAAE8B,IAAI,EAAEnB;UAAI;QAC1C;QACA,OAAOX,cAAc;MACzB,CAAC,CAAC;MACFP,kBAAkB,CAAC+B,sBAAsB,CAAC;MAC1C3B,gBAAgB,CAAC,IAAI,CAAC;IAC1B,CAAC,CAAC;EACN,CAAC;EAEDf,SAAS,CAAC,YAAM;IAChBiD,cAAc,CAAC,CAAC,CAAChB,IAAI,CAAC,UAACiB,IAAI,EAAK;MAC5BvC,kBAAkB,CAACuC,IAAI,CAAC;IAC5B,CAAC,CAAC;EACF,CAAC,EAAE,EAAE,CAAC;EACR,oBACEnD,KAAA,CAAAoD,aAAA;IAAKC,SAAS,EAAC,UAAU;IAAAC,MAAA,EAAAC,KAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACrB5D,KAAA,CAAAoD,aAAA;IAAIC,SAAS,EAAC,gBAAgB;IAAAC,MAAA,EAAAC,KAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,UAAY,CAAC,eAC5C5D,KAAA,CAAAoD,aAAA;IAAKC,SAAS,EAAC,oBAAoB;IAAAC,MAAA,EAAAC,KAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,eAAkB,CAAC,eACvD5D,KAAA,CAAAoD,aAAA,CAAChD,WAAW;IAACyD,WAAW,EAAC,OAAO;IAACC,YAAY,EAAEjC,UAAW;IAAAyB,MAAA,EAAAC,KAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAC,CAAC,eAC5D5D,KAAA,CAAAoD,aAAA;IAAKC,SAAS,EAAC,oBAAoB;IAAAC,MAAA,EAAAC,KAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAC9B3C,YAAY,CAAC8B,GAAG,CAAC,UAAAgB,WAAW;IAAA,oBACzB/D,KAAA,CAAAoD,aAAA,CAACjD,UAAU;MACX6D,GAAG,EAAED,WAAW,CAACnB,EAAG;MACpBT,OAAO,EAAE4B,WAAY;MACrBE,OAAO,EAAE5C,UAAU,CAAC0C,WAAW,CAACnB,EAAE,CAAE;MACpCrC,aAAa,EAAEA,aAAc;MAC7B+B,aAAa,EAAEA,aAAc;MAC7BO,aAAa,EAAEA,aAAc;MAC7B9B,aAAa,EAAEA,aAAc;MAC7BC,gBAAgB,EAAEA,gBAAiB;MACnCa,UAAU,EAAEA,UAAW;MAAAyB,MAAA,EAAAC,KAAA;MAAAC,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,CACtB,CAAC;EAAA,CAEL,CACA,CACJ,CAAC;AAEV,CAAC;AAED,eAAevD,WAAW"},"metadata":{},"sourceType":"module"}