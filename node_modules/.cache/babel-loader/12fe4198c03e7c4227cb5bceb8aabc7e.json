{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nfunction isTLSSocket(socket) {\n  return socket.encrypted;\n}\nvar deferToConnect = function deferToConnect(socket, fn) {\n  var listeners;\n  if (typeof fn === 'function') {\n    var connect = fn;\n    listeners = {\n      connect: connect\n    };\n  } else {\n    listeners = fn;\n  }\n  var hasConnectListener = typeof listeners.connect === 'function';\n  var hasSecureConnectListener = typeof listeners.secureConnect === 'function';\n  var hasCloseListener = typeof listeners.close === 'function';\n  var onConnect = function onConnect() {\n    if (hasConnectListener) {\n      listeners.connect();\n    }\n    if (isTLSSocket(socket) && hasSecureConnectListener) {\n      if (socket.authorized) {\n        listeners.secureConnect();\n      } else if (!socket.authorizationError) {\n        socket.once('secureConnect', listeners.secureConnect);\n      }\n    }\n    if (hasCloseListener) {\n      socket.once('close', listeners.close);\n    }\n  };\n  if (socket.writable && !socket.connecting) {\n    onConnect();\n  } else if (socket.connecting) {\n    socket.once('connect', onConnect);\n  } else if (socket.destroyed && hasCloseListener) {\n    listeners.close(socket._hadError);\n  }\n};\nexports.default = deferToConnect;\n// For CommonJS default export support\nmodule.exports = deferToConnect;\nmodule.exports.default = deferToConnect;","map":null,"metadata":{},"sourceType":"script"}