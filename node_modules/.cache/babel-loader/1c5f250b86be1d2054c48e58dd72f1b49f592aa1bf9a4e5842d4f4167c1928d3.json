{"ast":null,"code":"// ablyFunctions.js\n\nimport Ably from 'ably';\nimport express from 'express';\nconst app = express();\nimport dotenv from 'dotenv';\ndotenv.config(); // Load environment variables from .env\n\nconst ably = new Ably.Realtime({\n  key: process.env.REACT_APP_ABLY_API_KEY // Use the environment variable\n});\n\n// Function to generate Ably token\nconst generateAblyToken = async clientId => {\n  return new Promise((resolve, reject) => {\n    const tokenRequestData = {\n      clientId // Pass the client ID as an argument\n    };\n\n    ably.auth.createTokenRequest(tokenRequestData, (err, tokenRequest) => {\n      if (err) {\n        reject(err);\n      } else {\n        resolve({\n          tokenRequest\n        });\n      }\n    });\n  });\n};\nexport { generateAblyToken };","map":{"version":3,"names":["Ably","express","app","dotenv","config","ably","Realtime","key","process","env","REACT_APP_ABLY_API_KEY","generateAblyToken","clientId","Promise","resolve","reject","tokenRequestData","auth","createTokenRequest","err","tokenRequest"],"sources":["/home/jeff/bobawedding/src/serverFunctions/ablyFunction.jsx"],"sourcesContent":["// ablyFunctions.js\n\nimport Ably from 'ably';\nimport express from 'express';\n\nconst app = express();\n\nimport dotenv from 'dotenv';\ndotenv.config(); // Load environment variables from .env\n\nconst ably = new Ably.Realtime({\n  key: process.env.REACT_APP_ABLY_API_KEY, // Use the environment variable\n});\n\n// Function to generate Ably token\nconst generateAblyToken = async (clientId) => {\n  return new Promise((resolve, reject) => {\n    const tokenRequestData = {\n      clientId, // Pass the client ID as an argument\n    };\n\n    ably.auth.createTokenRequest(tokenRequestData, (err, tokenRequest) => {\n      if (err) {\n        reject(err);\n      } else {\n        resolve({ tokenRequest });\n      }\n    });\n  });\n};\n\nexport { generateAblyToken };\n"],"mappings":"AAAA;;AAEA,OAAOA,IAAI,MAAM,MAAM;AACvB,OAAOC,OAAO,MAAM,SAAS;AAE7B,MAAMC,GAAG,GAAGD,OAAO,CAAC,CAAC;AAErB,OAAOE,MAAM,MAAM,QAAQ;AAC3BA,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,CAAC;;AAEjB,MAAMC,IAAI,GAAG,IAAIL,IAAI,CAACM,QAAQ,CAAC;EAC7BC,GAAG,EAAEC,OAAO,CAACC,GAAG,CAACC,sBAAsB,CAAE;AAC3C,CAAC,CAAC;;AAEF;AACA,MAAMC,iBAAiB,GAAG,MAAOC,QAAQ,IAAK;EAC5C,OAAO,IAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;IACtC,MAAMC,gBAAgB,GAAG;MACvBJ,QAAQ,CAAE;IACZ,CAAC;;IAEDP,IAAI,CAACY,IAAI,CAACC,kBAAkB,CAACF,gBAAgB,EAAE,CAACG,GAAG,EAAEC,YAAY,KAAK;MACpE,IAAID,GAAG,EAAE;QACPJ,MAAM,CAACI,GAAG,CAAC;MACb,CAAC,MAAM;QACLL,OAAO,CAAC;UAAEM;QAAa,CAAC,CAAC;MAC3B;IACF,CAAC,CAAC;EACJ,CAAC,CAAC;AACJ,CAAC;AAED,SAAST,iBAAiB"},"metadata":{},"sourceType":"module","externalDependencies":[]}