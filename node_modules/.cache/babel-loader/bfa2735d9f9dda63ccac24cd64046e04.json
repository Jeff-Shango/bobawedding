{"ast":null,"code":"import _slicedToArray from \"/home/jeff/bobawedding/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _this = this,\n  _jsxFileName = \"/home/jeff/bobawedding/src/weddingCommentServer/Comments.jsx\";\nimport React, { useEffect, useState } from 'react';\n// import { \n//     getComments as getCommentsApi, \n//     createComment as createCommentApi,\n//     deleteComment as deleteCommentApi,\n//     updateComment as updateCommentApi } from './WeddingServer/api.js'\nimport WedComment from './Comment.jsx';\nimport CommentForm from './CommentForm.jsx';\nimport { addComment, getReplies, deleteComment, updateComment } from './WeddingServer//api.js';\n\n// import CommentForm from './CommentForm';\nvar WedComments = function WedComments(_ref) {\n  var currentUserId = _ref.currentUserId;\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    backendComments = _useState2[0],\n    setBackendComments = _useState2[1];\n  var _useState3 = useState(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    activeComment = _useState4[0],\n    setActiveComment = _useState4[1];\n  var rootComments = backendComments.filter(function (backendComment) {\n    return backendComment.parentId === null;\n  });\n  // const getReplies = commendId => {\n  //     return backendComments\n  //     .filter((backendComment) => backendComment.parentId === commendId)\n  //     .sort(\n  //         (a, b) => \n  //             new Date(a.createdAt).getTime() - new Date(b.createdAt).getTime()\n  //     );\n  // };\n  //     const addComment = (text, parentId) => {\n  //         console.log(\"addComment\", text, parentId);\n  //         createCommentApi(text, parentId).then(comment => {\n  //             setBackendComments([comment, ...backendComments])\n  //             setActiveComment(null)\n  //         })\n  //     };\n\n  //     const deleteComment = (commentId) => {\n  // if (window.confirm('Sure about deleting this?')) {\n  //     deleteCommentApi(commentId).then(() => {\n  //         const updatedBackendComments = backendComments.filter((backendComment) => backendComment.id !== commentId);\n  //         setBackendComments(updatedBackendComments);\n  //     })\n  // }\n  //     }\n\n  //     const updateComment = (text, commentId) => {\n  //         updateCommentApi(text, commentId).then(() => {\n  //             const updatedBackendComments = backendComments.map(backendComment => {\n  //                 if (backendComment.id === commentId) {\n  //                     return { ...backendComment, body: text };\n  //                 }\n  //                 return backendComment;\n  //             });\n  //             setBackendComments(updatedBackendComments);\n  //             setActiveComment(null)\n  //         });\n  //     };\n\n  // useEffect(() => {\n  // getCommentsApi().then((data) => {\n  //     setBackendComments(data);\n  // });\n  // }, []);\n\n  useEffect(function () {\n    getComments().then(function (data) {\n      setBackendComments(data);\n    });\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"comments\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    className: \"comments-title\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 9\n    }\n  }, \"Comments\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"comment-form-title\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }\n  }, \"Write Comment\"), /*#__PURE__*/React.createElement(CommentForm, {\n    submitLabel: \"Write\",\n    handleSubmit: addComment,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"comments-container\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }\n  }, rootComments.map(function (rootComment) {\n    return /*#__PURE__*/React.createElement(WedComment, {\n      key: rootComment.id,\n      comment: rootComment,\n      replies: getReplies(rootComment.id),\n      currentUserId: currentUserId,\n      deleteComment: deleteComment,\n      updateComment: updateComment,\n      activeComment: activeComment,\n      setActiveComment: setActiveComment,\n      addComment: addComment,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 17\n      }\n    });\n  })));\n};\nexport default WedComments;","map":{"version":3,"names":["React","useEffect","useState","WedComment","CommentForm","addComment","getReplies","deleteComment","updateComment","WedComments","_ref","currentUserId","_useState","_useState2","_slicedToArray","backendComments","setBackendComments","_useState3","_useState4","activeComment","setActiveComment","rootComments","filter","backendComment","parentId","getComments","then","data","createElement","className","__self","_this","__source","fileName","_jsxFileName","lineNumber","columnNumber","submitLabel","handleSubmit","map","rootComment","key","id","comment","replies"],"sources":["/home/jeff/bobawedding/src/weddingCommentServer/Comments.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react'\n// import { \n//     getComments as getCommentsApi, \n//     createComment as createCommentApi,\n//     deleteComment as deleteCommentApi,\n//     updateComment as updateCommentApi } from './WeddingServer/api.js'\nimport WedComment from './Comment.jsx';\nimport CommentForm from './CommentForm.jsx';\nimport {\n    addComment, \n    getReplies, \n    deleteComment,\n    updateComment,\n} from './WeddingServer//api.js'\n\n// import CommentForm from './CommentForm';\nconst WedComments = ({ currentUserId }) => {\n    const [backendComments, setBackendComments] = useState([]);\n    const [activeComment, setActiveComment] = useState(null)\n    const rootComments = backendComments.filter(\n        (backendComment) => backendComment.parentId === null\n    );\n    // const getReplies = commendId => {\n    //     return backendComments\n    //     .filter((backendComment) => backendComment.parentId === commendId)\n    //     .sort(\n    //         (a, b) => \n    //             new Date(a.createdAt).getTime() - new Date(b.createdAt).getTime()\n    //     );\n    // };\n//     const addComment = (text, parentId) => {\n//         console.log(\"addComment\", text, parentId);\n//         createCommentApi(text, parentId).then(comment => {\n//             setBackendComments([comment, ...backendComments])\n//             setActiveComment(null)\n//         })\n//     };\n    \n//     const deleteComment = (commentId) => {\n// if (window.confirm('Sure about deleting this?')) {\n//     deleteCommentApi(commentId).then(() => {\n//         const updatedBackendComments = backendComments.filter((backendComment) => backendComment.id !== commentId);\n//         setBackendComments(updatedBackendComments);\n//     })\n// }\n//     }\n\n//     const updateComment = (text, commentId) => {\n//         updateCommentApi(text, commentId).then(() => {\n//             const updatedBackendComments = backendComments.map(backendComment => {\n//                 if (backendComment.id === commentId) {\n//                     return { ...backendComment, body: text };\n//                 }\n//                 return backendComment;\n//             });\n//             setBackendComments(updatedBackendComments);\n//             setActiveComment(null)\n//         });\n//     };\n\n    // useEffect(() => {\n    // getCommentsApi().then((data) => {\n    //     setBackendComments(data);\n    // });\n    // }, []);\n\n    useEffect(() => {\n        getComments().then((data) => {\n            setBackendComments(data);\n        });\n    }, []);\n\n  return (\n    <div className='comments'>\n        <h3 className=\"comments-title\">Comments</h3>\n        <div className=\"comment-form-title\">Write Comment</div>\n        <CommentForm submitLabel=\"Write\" handleSubmit={addComment}/>\n        <div className=\"comments-container\">\n            {rootComments.map((rootComment) => (\n                <WedComment \n                key={rootComment.id} \n                comment={rootComment} \n                replies={getReplies(rootComment.id)} \n                currentUserId={currentUserId}\n                deleteComment={deleteComment}\n                updateComment={updateComment}\n                activeComment={activeComment}\n                setActiveComment={setActiveComment}\n                addComment={addComment}\n                />\n                \n            ))}\n        </div>\n    </div>\n  )\n}\n\nexport default WedComments"],"mappings":"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"},"metadata":{},"sourceType":"module"}