{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.retryAfterStatusCodes = void 0;\nexports.retryAfterStatusCodes = new Set([413, 429, 503]);\nvar calculateRetryDelay = function calculateRetryDelay(_ref) {\n  var attemptCount = _ref.attemptCount,\n    retryOptions = _ref.retryOptions,\n    error = _ref.error,\n    retryAfter = _ref.retryAfter;\n  if (attemptCount > retryOptions.limit) {\n    return 0;\n  }\n  var hasMethod = retryOptions.methods.includes(error.options.method);\n  var hasErrorCode = retryOptions.errorCodes.includes(error.code);\n  var hasStatusCode = error.response && retryOptions.statusCodes.includes(error.response.statusCode);\n  if (!hasMethod || !hasErrorCode && !hasStatusCode) {\n    return 0;\n  }\n  if (error.response) {\n    if (retryAfter) {\n      if (retryOptions.maxRetryAfter === undefined || retryAfter > retryOptions.maxRetryAfter) {\n        return 0;\n      }\n      return retryAfter;\n    }\n    if (error.response.statusCode === 413) {\n      return 0;\n    }\n  }\n  var noise = Math.random() * 100;\n  return Math.pow(2, attemptCount - 1) * 1000 + noise;\n};\nexports.default = calculateRetryDelay;","map":null,"metadata":{},"sourceType":"script"}